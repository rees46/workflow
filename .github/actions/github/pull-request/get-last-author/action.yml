name: Get last merget PullRequest author
description: get last merget pull request author

inputs:
  sourceDirectory:
    default: tmp/source
    description: Commit author GitGup token
    required: true
  githubToken:
    description: GitHup token
    required: true
  reviewerUsername:
    description: github pull request reviewer username
    required: true

outputs:
  lastPrAuthor:
    description: Get branch name
    value: ${{ steps.pr_author.outputs.lastPrAuthor }}

runs:
  using: composite

  steps:
    - uses: actions/github-script@v7
      id: get_last_pr
      with:
        script: |
          const { data: prs } = await github.rest.pulls.list({
            owner: context.repo.owner,
            repo: context.repo.repo,
            state: 'closed',
            sort: 'updated',
            direction: 'desc',
            per_page: 1
          });
          const login = prs[0]?.user?.login || inputs.reviewerUsername;
          core.setOutput('lastPrAuthor', login);
